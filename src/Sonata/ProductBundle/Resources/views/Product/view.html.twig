{#

This file is part of the Sonata package.

(c) Thomas Rabaix <thomas.rabaix@sonata-project.org>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{% block product %}
    {% sonata_template_box 'This is the product view template. Feel free to override it.' %}

    {% block product_errors %}
        {%  if not provider.hasVariations(product) and product.getStock == 0 %}
            <div class="alert alert-error">
                {% trans from 'SonataProductBundle' %}product_out_of_stock{% endtrans %}
            </div>
        {% endif %}
    {% endblock %}

    <!-- Begin product display -->
    <div class="row-fluid" itemscope itemtype="http://schema.org/Product">
        <div class="span6">
            <h2 itemprop="name">{% block product_title %}{{ product.name }}{% endblock %}</h2>
            {% block product_details %}
                <div class="row-fluid">
                    {% block product_image %}{% thumbnail product.image, 'preview' with {'itemprop':'image', 'class': 'img-rounded', 'style': 'float:left; margin: 0 10px 10px 0;'} %}{% endblock%}
                </div>

                <div class="row-fluid">
                    {% block product_gallery %}Block 'product_gallery' to override{% endblock %}
                </div>
            {% endblock %}
        </div>

        <div class="span6">
            <div itemprop="description">
                {% block product_description %}{{ product.rawDescription|raw }}{% endblock %}
            </div>

            {% block product_delivery %}
                <div>
                    Block 'product_delivery' to override
                </div>
            {% endblock %}

            {% block product_variations_form %}
                {% if variation_form %}
                    <form class="form-horizontal" name="variations">
                        {% for name, field in variation_form %}
                            {% if name == '_token' %}
                            <div class="control-group">
                                {{ form_label(field, ('form.label_' ~ name)|trans({}, 'SonataProductBundle'), {'attr': {'class': 'control-label'}}) }}
                                <div class="controls">
                                    {{ form_widget(field) }}
                                </div>
                            </div>
                        {% endfor %}
                        {{ form_rest(variation_form) }}
                    </form>

                    <script>
                        var productTree = {};
                        var selectLists = $("form[name='variations'] select");


                        selectsList.change(function() {
                            link = null;

                        });
                        console.log(select);
                    </script>
                {% endif %}
            {% endblock %}

            {% block product_basket %}
                {% include "SonataBasketBundle:Basket:add_product_form.html.twig" %}
            {% endblock %}
        </div>
    </div>
    <!-- End product display -->
{% endblock %}


{% block product_cross %}
    <!-- Cross selling -->
    <div class="row-fluid">
        {% block product_cross_selling %}
            {% include "SonataProductBundle:Product:view_similar.html.twig" %}
        {% endblock %}
    </div>
    <!-- End Cross selling -->
{% endblock %}